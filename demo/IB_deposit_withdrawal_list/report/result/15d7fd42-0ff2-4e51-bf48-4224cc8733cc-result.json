{"name": "test_IB_list[data0]", "status": "broken", "statusDetails": {"message": "NameError: name 'BVerifyList' is not defined", "trace": "self = <Test_IB_Deposit_Withdrawal.Test_IB_deposit_withdrawal_list object at 0x08FA8898>, data = {'IB账号': 1000005349.0}\n\n    @allure.feature('核对IB下级出入金记录，断言导出与复制功能')\n    @allure.story('用例执行')\n    @allure.description('读取测试文档数据，执行用例')\n    @pytest.mark.parametrize('data',testdata)\n    def test_IB_list(self,data):\n    \n        print('当前执行用例账号：{}'.format(int(data['IB账号'])))\n    \n        with allure.step('获取当前测试数据下标'):\n            self.data_index=testdata.index(data)\n    \n        with allure.step('查询mysql，判断当前IB存在多少个下级'):\n            IBVerifyList.search_ib_lower(int(data['IB账号']))\n    \n        with allure.step('登录会员中心判断当前IB是否存下级出入金记录'):\n            if IBVerifyList.logincp(int(data['IB账号'])):\n    \n                with allure.step('IB账号{}存在下级出入金记录'.format(int(data['IB账号']))):\n    \n                    for y in IBVerifyList.deduplication_lower_list:\n                        with allure.step('查询下级账号{}出金记录'.format(y)):\n                            if IBVerifyList.verify_withdrawal(int(y)):\n                                with allure.step('存在出金记录,断言mongodb出金表与页面数据是否一致'):\n                                    with allure.step('断言页面出金条数：{}，数据库出金条数：{}'.format(IBVerifyList.len_withdrawal,len(IBVerifyList.lower_withdrawalDatabase))):\n                                        check.equal(len(IBVerifyList.lower_withdrawalDatabase),IBVerifyList.len_withdrawal,\n                                        '页面出金条数{}，数据库出金条数：{}，账号{}出金记录总数断言失败'.format(IBVerifyList.len_withdrawal,len(IBVerifyList.lower_withdrawalDatabase),int(y)))\n    \n                                    #断言页面出金数据与数据库数据\n                                    for i in range(0,len(IBVerifyList.lower_withdrawalDatabase)):\n                                        for x in range(0,len(IBVerifyList.withdrawal_list)):\n                                            if IBVerifyList.lower_withdrawalDatabase[i]['mtRefNo']==IBVerifyList.withdrawal_list[x]['mtRefNo']:\n    \n                                                with allure.step('断言订单号{}数据:'.format(IBVerifyList.lower_withdrawalDatabase[i]['mtRefNo'])):\n    \n                                                    with allure.step('断言页面主账号：{}，数据库主账号：{}'.format(IBVerifyList.lower_withdrawalDatabase[i]['accountNumber'],IBVerifyList.withdrawal_list[x]['accountNumber'])):\n                                                        check.equal(IBVerifyList.lower_withdrawalDatabase[i]['accountNumber'],IBVerifyList.withdrawal_list[x]['accountNumber'],\n                                                        '页面主账号{}；数据库主账号{}，第{}条数据断言失败'.format(IBVerifyList.withdrawal_list[x]['accountNumber'],IBVerifyList.lower_withdrawalDatabase[i]['accountNumber'],i))\n    \n                                                    with allure.step('断言页面交易账号：{}，数据库交易账号：{}'.format(IBVerifyList.withdrawal_list[x]['tradeAccount'],int(IBVerifyList.lower_withdrawalDatabase[i]['tradeAccount']))):\n                                                        check.equal(int(IBVerifyList.lower_withdrawalDatabase[i]['tradeAccount']),IBVerifyList.withdrawal_list[x]['tradeAccount'],\n                                                        '页面交易账号：{}，数据库交易账号：{}，第{}条数据断言失败'.format(IBVerifyList.withdrawal_list[x]['tradeAccount'],int(IBVerifyList.lower_withdrawalDatabase[i]['tradeAccount']),i))\n    \n                                                    with allure.step('断言页面姓名：{}，数据库姓名：{}'.format(IBVerifyList.withdrawal_list[x]['clnName'],IBVerifyList.lower_withdrawalDatabase[i]['clnName'].replace(' ',''))):\n                                                        check.equal(IBVerifyList.lower_withdrawalDatabase[i]['clnName'].replace(' ',''),IBVerifyList.withdrawal_list[x]['clnName'],\n                                                        '页面姓名：{}，数据库姓名：{}，第{}条数据断言失败'.format(IBVerifyList.withdrawal_list[x]['clnName'],IBVerifyList.lower_withdrawalDatabase[i]['clnName'].replace(' ',''),i))\n    \n                                                    with allure.step('断言页面时间：{}，数据库时间：{}'.format(IBVerifyList.withdrawal_list[x]['lastUpdateDate'].strftime('%Y-%m-%d %H:%M'),IBVerifyList.lower_withdrawalDatabase[i]['lastUpdateDate'].strftime('%Y-%m-%d %H:%M'))):\n                                                        check.equal(IBVerifyList.lower_withdrawalDatabase[i]['lastUpdateDate'].strftime('%Y-%m-%d %H:%M'),IBVerifyList.withdrawal_list[x]['lastUpdateDate'].strftime('%Y-%m-%d %H:%M'),\n                                                        '页面时间：{}，数据库时间：{}，第{}条数据断言失败'.format(IBVerifyList.withdrawal_list[x]['lastUpdateDate'].strftime('%Y-%m-%d %H:%M'),IBVerifyList.lower_withdrawalDatabase[i]['lastUpdateDate'].strftime('%Y-%m-%d %H:%M'),i))\n    \n                                                    with allure.step('断言页面交易金额：{}，数据库交易金额：{}'.format(IBVerifyList.withdrawal_list[x]['mtAmt'],float(IBVerifyList.lower_withdrawalDatabase[i]['mtAmt']))):\n                                                        check.equal(float(IBVerifyList.lower_withdrawalDatabase[i]['mtAmt']),IBVerifyList.withdrawal_list[x]['mtAmt'],\n                                                        '页面交易金额：{}，数据库交易金额：{}，第{}条数据断言失败'.format(IBVerifyList.withdrawal_list[x]['mtAmt'],float(IBVerifyList.lower_withdrawalDatabase[i]['mtAmt']),i)) #MT金额\n    \n                                                    break\n                                            else:\n                                                with allure.step('订单号{}在页面上无记录:'.format(IBVerifyList.lower_withdrawalDatabase[i]['mtRefNo'])):\n                                                    pass\n                            else:\n                                with allure.step('下级账号{}不存在出金记录'.format(int(y))):\n                                    print('数据库记录{}条'.format(len(IBVerifyList.lower_withdrawalDatabase)))\n    \n    \n                        with allure.step('查询下级账号{}入金记录'.format(y)):\n                            if IBVerifyList.verify_deposit(int(y)):\n                                with allure.step('存在入金记录,断言mongodb出金表与页面数据是否一致'):\n                                    with allure.step('断言数据库入金条数：{}，页面入金条数：{}'.format(len(IBVerifyList.lower_depositDatabase),IBVerifyList.len_deposit)):\n                                        check.equal(len(IBVerifyList.lower_depositDatabase),IBVerifyList.len_deposit,\n                                        '数据库入金条数:{}，页面入金条数：{}，账号{}入金记录总数断言失败'.format(len(IBVerifyList.lower_depositDatabase),IBVerifyList.len_deposit,int(y)))\n    \n                                    for i in range(0,len(IBVerifyList.lower_depositDatabase)):\n                                        for x in range(0,len(IBVerifyList.deposit_list)):\n    \n                                            if IBVerifyList.lower_depositDatabase[i]['mtRefNo'] == IBVerifyList.deposit_list[x]['mtRefNo']:\n>                                               with allure.step('断言订单号数据{}'.format(BVerifyList.lower_depositDatabase[i]['mtRefNo'])):\nE                                               NameError: name 'BVerifyList' is not defined\n\ndemo\\IB_deposit_withdrawal_list\\actions_bin\\Test_IB_Deposit_Withdrawal.py:125: NameError"}, "description": "读取测试文档数据，执行用例", "steps": [{"name": "获取当前测试数据下标", "status": "passed", "start": 1648197532948, "stop": 1648197535112}, {"name": "查询mysql，判断当前IB存在多少个下级", "status": "passed", "start": 1648197535112, "stop": 1648197541902}, {"name": "登录会员中心判断当前IB是否存下级出入金记录", "status": "broken", "statusDetails": {"message": "NameError: name 'BVerifyList' is not defined\n", "trace": "  File \"c:\\Users\\tyler.tang\\Desktop\\code\\tylerhub\\demo\\IB_deposit_withdrawal_list\\actions_bin\\Test_IB_Deposit_Withdrawal.py\", line 125, in test_IB_list\n    with allure.step('断言订单号数据{}'.format(BVerifyList.lower_depositDatabase[i]['mtRefNo'])):\n"}, "steps": [{"name": "IB账号1000005349存在下级出入金记录", "status": "broken", "statusDetails": {"message": "NameError: name 'BVerifyList' is not defined\n", "trace": "  File \"c:\\Users\\tyler.tang\\Desktop\\code\\tylerhub\\demo\\IB_deposit_withdrawal_list\\actions_bin\\Test_IB_Deposit_Withdrawal.py\", line 125, in test_IB_list\n    with allure.step('断言订单号数据{}'.format(BVerifyList.lower_depositDatabase[i]['mtRefNo'])):\n"}, "steps": [{"name": "查询下级账号1000006142出金记录", "status": "passed", "steps": [{"name": "下级账号1000006142不存在出金记录", "status": "passed", "start": 1648197582210, "stop": 1648197705170}], "start": 1648197576777, "stop": 1648197705170}, {"name": "查询下级账号1000006142入金记录", "status": "broken", "statusDetails": {"message": "NameError: name 'BVerifyList' is not defined\n", "trace": "  File \"c:\\Users\\tyler.tang\\Desktop\\code\\tylerhub\\demo\\IB_deposit_withdrawal_list\\actions_bin\\Test_IB_Deposit_Withdrawal.py\", line 125, in test_IB_list\n    with allure.step('断言订单号数据{}'.format(BVerifyList.lower_depositDatabase[i]['mtRefNo'])):\n"}, "steps": [{"name": "存在入金记录,断言mongodb出金表与页面数据是否一致", "status": "broken", "statusDetails": {"message": "NameError: name 'BVerifyList' is not defined\n", "trace": "  File \"c:\\Users\\tyler.tang\\Desktop\\code\\tylerhub\\demo\\IB_deposit_withdrawal_list\\actions_bin\\Test_IB_Deposit_Withdrawal.py\", line 125, in test_IB_list\n    with allure.step('断言订单号数据{}'.format(BVerifyList.lower_depositDatabase[i]['mtRefNo'])):\n"}, "steps": [{"name": "断言数据库入金条数：3，页面入金条数：3", "status": "passed", "start": 1648197715501, "stop": 1648197715501}], "start": 1648197715501, "stop": 1648197715501}], "start": 1648197705170, "stop": 1648197715501}], "start": 1648197576777, "stop": 1648197715501}], "start": 1648197541902, "stop": 1648197715501}], "parameters": [{"name": "data", "value": "{'IB账号': 1000005349.0}"}], "start": 1648197506121, "stop": 1648197724976, "uuid": "26e4f820-d34c-492d-916d-44460e7eeab4", "historyId": "92a423ecdb2e2f337f7317946a40992b", "testCaseId": "3064abbf9460a23e29bfc329f509a99c", "fullName": "demo.IB_deposit_withdrawal_list.actions_bin.Test_IB_Deposit_Withdrawal.Test_IB_deposit_withdrawal_list#test_IB_list", "labels": [{"name": "story", "value": "用例执行"}, {"name": "feature", "value": "核对IB下级出入金记录，断言导出与复制功能"}, {"name": "parentSuite", "value": "demo.IB_deposit_withdrawal_list.actions_bin"}, {"name": "suite", "value": "Test_IB_Deposit_Withdrawal"}, {"name": "subSuite", "value": "Test_IB_deposit_withdrawal_list"}, {"name": "host", "value": "SZ01-QA-G-10"}, {"name": "thread", "value": "15724-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "demo.IB_deposit_withdrawal_list.actions_bin.Test_IB_Deposit_Withdrawal"}]}